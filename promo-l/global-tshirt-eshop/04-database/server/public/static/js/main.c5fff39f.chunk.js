(this.webpackJsonp02=this.webpackJsonp02||[]).push([[0],{33:function(e,t,c){},34:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(1),i=c(17),a=c.n(i),s=c(9),o=c(19),d=c(7),l=c(2),u=function(){return Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"text--bold",children:[Object(n.jsx)("td",{children:"Producto"}),Object(n.jsx)("td",{children:"Precio"}),Object(n.jsx)("td",{children:"Unidades"}),Object(n.jsx)("td",{className:"text-align-right",children:"Total"})]})})},j=function(e){return Object(n.jsx)("button",{className:"card__btn "+e.cssClass,title:e.title,onClick:function(){e.handleClick()},children:e.text||""})},m=function(e){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:e.name}),Object(n.jsxs)("td",{children:[e.price," \u20ac"]}),Object(n.jsxs)("td",{children:[Object(n.jsx)(j,{text:"-",title:"Quitar una unidad m\xe1s de este producto",handleClick:function(){e.decrementCartProduct(e.id)}}),e.units,Object(n.jsx)(j,{text:"+",title:"A\xf1adir una unidad m\xe1s de este producto",handleClick:function(){e.incrementCartProduct(e.id)}}),Object(n.jsx)(j,{cssClass:"fas fa-trash",title:"Eliminar este producto de la cesta",handleClick:function(){e.deleteCartProduct(e.id)}})]}),Object(n.jsxs)("td",{className:"text-align-right",children:[e.price*e.units," \u20ac"]})]})},b=function(e){return Object(n.jsx)("tfoot",{children:Object(n.jsxs)("tr",{className:"text--bold",children:[Object(n.jsx)("td",{children:"Total"}),Object(n.jsxs)("td",{colSpan:"3",className:"text-align-right",children:[e.total," \u20ac"]})]})})},f=function(e){return Object(n.jsx)("h2",{className:"title--medium",children:e.title})},h=function(e){return Object(n.jsxs)("div",{children:[Object(n.jsx)(f,{title:"Cesta de la compra"}),Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)(u,{}),Object(n.jsx)("tbody",{children:e.cartProducts.map((function(t){return Object(n.jsx)(m,{id:t.id,name:t.name,units:t.units,price:t.price,incrementCartProduct:e.incrementCartProduct,decrementCartProduct:e.decrementCartProduct,deleteCartProduct:e.deleteCartProduct},t.id)}))}),Object(n.jsx)(b,{total:e.cartProducts.reduce((function(e,t){return e+t.units*t.price}),0)})]})]})},O=function(e){var t=Object(r.useState)("miguel@adalab.es"),c=Object(d.a)(t,2),i=c[0],a=c[1],s=Object(r.useState)("12345678"),o=Object(d.a)(s,2),l=o[0],u=o[1];return Object(n.jsxs)("form",{className:"mb-1",onSubmit:function(t){t.stopPropagation(),e.handleLogin({email:i,password:l})},children:[Object(n.jsx)(f,{title:"Bienvenida a nuestra tienda de camisetas"}),Object(n.jsx)(f,{title:"Identif\xedcate por favor"}),Object(n.jsx)("label",{className:"form__label display-block",htmlFor:"email",children:"Escribe tu email:"}),Object(n.jsx)("input",{className:"form__input-text m-0",type:"text",id:"email",value:i,onChange:function(e){a(e.target.value)}}),Object(n.jsx)("label",{className:"form__label display-block",htmlFor:"password",children:"Escribe tu contrase\xf1a:"}),Object(n.jsx)("input",{className:"form__input-text m-0",type:"password",id:"password",value:l,onChange:function(e){u(e.target.value)}}),Object(n.jsx)("button",{className:"card__btn m-0 mt-1",children:"Entrar"}),e.loginError]})},x=function(e){return Object(n.jsxs)("div",{className:"profile-wrapper",children:[Object(n.jsxs)("p",{className:"greeting",children:["Hola ",e.userData.email]}),Object(n.jsx)("button",{className:"card__btn m-0",onClick:function(t){e.handleCloseSession()},children:"Cerrar sesi\xf3n"})]})},p=function(e){return Object(n.jsxs)("article",{className:"card",children:[Object(n.jsx)("img",{src:e.imageUrl,className:"card__img",alt:"Producto: ".concat(e.name)}),Object(n.jsx)("h3",{className:"card__title",children:e.name}),Object(n.jsxs)("p",{className:"card__description",children:[e.price," \u20ac"]}),Object(n.jsx)("button",{className:"card__btn",title:"A\xf1adir este producto a la cesta",onClick:function(){e.incrementCartProduct(e.id)},children:"A\xf1adir a la cesta"}),Object(n.jsx)(s.b,{to:"/product/".concat(e.id),className:"card__btn",title:"Ver el detalle de este producto",children:"Ver detalle del producto"})]})},g=function(e){return Object(n.jsxs)("form",{className:"mb-1",onSubmit:function(e){e.preventDefault()},children:[Object(n.jsx)("label",{className:"form__label",htmlFor:"name",children:"Filtrar por nombre:"}),Object(n.jsx)("input",{className:"form__input-text",type:"text",id:"name",value:e.filterText,onChange:function(t){e.handleFilter(t.target.value)}})]})},C=function(e){var t=e.shopProducts.map((function(t){return Object(n.jsx)(p,{id:t.id,imageUrl:t.imageUrl,name:t.name,price:t.price,incrementCartProduct:e.incrementCartProduct},t.id)}));return Object(n.jsxs)("div",{children:[Object(n.jsx)(f,{title:"Listado de camisetas"}),Object(n.jsx)(g,{filterText:e.filterText,handleFilter:e.handleFilter}),Object(n.jsx)("section",{className:"cards",children:t})]})},N=function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f,{title:"Detalle del producto: ".concat(e.name)}),Object(n.jsxs)("article",{className:"card",children:[Object(n.jsx)("img",{src:e.imageUrl,className:"card__img",alt:"Producto: ".concat(e.name)}),Object(n.jsx)("h3",{className:"card__title",children:e.name}),Object(n.jsxs)("p",{className:"card__description",children:["Precio: ",Object(n.jsxs)("span",{className:"text--bold",children:[e.price," \u20ac"]})]}),Object(n.jsxs)("p",{className:"card__description",children:["Descripci\xf3n: ",Object(n.jsx)("span",{className:"text--bold",children:e.description})]}),Object(n.jsxs)("p",{className:"card__description",children:["Tallas: ",Object(n.jsx)("span",{className:"text--bold",children:e.sizes})]})]})]})},P="./api",_={getProducts:function(){return fetch("".concat(P,"/products")).then((function(e){return e.json()})).then((function(e){return e.products.items}))},getUser:function(e){return fetch("".concat(P,"/user?userId=").concat(e)).then((function(e){return e.json()})).then((function(e){return e.user}))},sendLogin:function(e){return fetch("".concat(P,"/login"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()}))},getCart:function(e){return fetch("".concat(P,"/cart?userId=").concat(e)).then((function(e){return e.json()})).then((function(e){return e.products}))},sendCart:function(e,t){var c=t.map((function(e){return{id:e.id,units:e.units}}));return fetch("".concat(P,"/cart?userId=").concat(e),{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}})}},v={decrementCartProduct:function(e,t){var c=e.find((function(e){return e.id===t}));if(c.units>1)c.units-=1;else{var n=e.findIndex((function(e){return e.id===t}));e.splice(n,1)}return e},deleteCartProduct:function(e,t){var c=e.findIndex((function(e){return e.id===t}));return e.splice(c,1),e},getProduct:function(e,t){return e.find((function(e){return e.id===t}))},incrementCartProduct:function(e,t,c){var n=t.find((function(e){return e.id===c}));if(n)n.units+=1;else{var r=e.find((function(e){return e.id===c}));r.units=1,t.push(r)}return t}},S={get:function(e){var t=JSON.parse(localStorage.getItem(e));return null!==t?t:{}},remove:function(e){localStorage.removeItem(e)},set:function(e,t){localStorage.setItem(e,JSON.stringify(t))}},y=function(){var e=S.get("user"),t=Object(r.useState)(e.userId||""),c=Object(d.a)(t,2),i=c[0],a=c[1],s=Object(r.useState)({}),u=Object(d.a)(s,2),j=u[0],m=u[1],b=Object(r.useState)(""),f=Object(d.a)(b,2),p=f[0],g=f[1],P=Object(r.useState)([]),y=Object(d.a)(P,2),I=y[0],k=y[1],w=Object(r.useState)([]),T=Object(d.a)(w,2),U=T[0],F=T[1],E=Object(r.useState)(""),L=Object(d.a)(E,2),J=L[0],z=L[1];Object(r.useEffect)((function(){_.getProducts().then((function(e){k(e)}))}),[]),Object(r.useEffect)((function(){i&&_.getCart(i).then((function(e){F(e)}))}),[i]),Object(r.useEffect)((function(){i&&_.getUser(i).then((function(e){m(e)}))}),[i]);var D=function(e){_.sendLogin(e).then((function(e){e.error?g(e.message):(g(""),a(e.userId),S.set("user",e))}))},A=function(e){z(e)},V=function(e){var t=v.incrementCartProduct(I,U,e);H(t)},q=function(e){var t=v.decrementCartProduct(U,e);H(t)},B=function(e){v.deleteCartProduct(U,e),H(U)},H=function(e){F(Object(o.a)(e)),_.sendCart(i,e)},Q=function(){S.remove("user"),window.location.reload()},G=function(){return I.filter((function(e){return e.name.toLowerCase().includes(J.toLowerCase())}))},K=function(e){var t=v.getProduct(I,e.match.params.productId);return t?Object(n.jsx)(N,{name:t.name,price:t.price,description:t.description,imageUrl:t.imageUrl,sizes:t.sizes}):Object(n.jsx)("p",{children:"Producto no encontrado"})};return Object(n.jsx)(n.Fragment,{children:""===i?Object(n.jsx)(O,{loginError:p,handleLogin:D}):Object(n.jsxs)(l.c,{children:[Object(n.jsxs)(l.a,{exact:!0,path:"/",children:[Object(n.jsx)(x,{userData:j,handleCloseSession:Q}),Object(n.jsxs)("div",{className:"col2",children:[Object(n.jsx)(C,{shopProducts:G(),filterText:J,handleFilter:A,incrementCartProduct:V}),Object(n.jsx)(h,{cartProducts:U.map((function(e){var t=e.id,c=I.find((function(e){return e.id===t}));return{id:c.id,description:c.description,imageUrl:c.imageUrl,name:c.name,price:c.price,sizes:c.sizes,units:e.units}})),incrementCartProduct:V,decrementCartProduct:q,deleteCartProduct:B})]})]}),Object(n.jsx)(l.a,{path:"/product/:productId",component:K})]})})};c(33);a.a.render(Object(n.jsx)(s.a,{children:Object(n.jsx)(y,{})}),document.querySelector("#root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.c5fff39f.chunk.js.map
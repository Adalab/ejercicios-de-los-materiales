(this.webpackJsonp02=this.webpackJsonp02||[]).push([[0],{33:function(t,e,c){},34:function(t,e,c){"use strict";c.r(e);var n=c(0),r=c(1),a=c(18),i=c.n(a),s=c(9),o=c(13),d=c(7),l=c(2),u=function(){return Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{className:"text--bold",children:[Object(n.jsx)("td",{children:"Producto"}),Object(n.jsx)("td",{children:"Precio"}),Object(n.jsx)("td",{children:"Unidades"}),Object(n.jsx)("td",{className:"text-align-right",children:"Total"})]})})},j=function(t){return Object(n.jsx)("button",{className:"card__btn "+t.cssClass,title:t.title,onClick:function(){t.handleClick()},children:t.text||""})},b=function(t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t.name}),Object(n.jsxs)("td",{children:[t.price," \u20ac"]}),Object(n.jsxs)("td",{children:[Object(n.jsx)(j,{text:"-",title:"Quitar una unidad m\xe1s de este producto",handleClick:function(){t.decrementCartProduct(t.id)}}),t.units,Object(n.jsx)(j,{text:"+",title:"A\xf1adir una unidad m\xe1s de este producto",handleClick:function(){t.incrementCartProduct(t.id)}}),Object(n.jsx)(j,{cssClass:"fas fa-trash",title:"Eliminar este producto de la cesta",handleClick:function(){t.deleteCartProduct(t.id)}})]}),Object(n.jsxs)("td",{className:"text-align-right",children:[t.price*t.units," \u20ac"]})]})},m=function(t){return Object(n.jsx)("tfoot",{children:Object(n.jsxs)("tr",{className:"text--bold",children:[Object(n.jsx)("td",{children:"Total"}),Object(n.jsxs)("td",{colSpan:"3",className:"text-align-right",children:[t.total," \u20ac"]})]})})},f=function(t){return Object(n.jsx)("h2",{className:"title--medium",children:t.title})},O=function(t){return Object(n.jsxs)("div",{children:[Object(n.jsx)(f,{title:"Cesta de la compra"}),Object(n.jsxs)("table",{className:"table",children:[Object(n.jsx)(u,{}),Object(n.jsx)("tbody",{children:t.cartProducts.map((function(e){return Object(n.jsx)(b,{id:e.id,name:e.name,units:e.units,price:e.price,incrementCartProduct:t.incrementCartProduct,decrementCartProduct:t.decrementCartProduct,deleteCartProduct:t.deleteCartProduct},e.id)}))}),Object(n.jsx)(m,{total:t.cartProducts.reduce((function(t,e){return t+e.units*e.price}),0)})]})]})},h=function(t){var e=Object(r.useState)(""),c=Object(d.a)(e,2),a=c[0],i=c[1],s=Object(r.useState)(""),o=Object(d.a)(s,2),l=o[0],u=o[1];return Object(n.jsxs)("form",{className:"mb-1",onSubmit:function(e){e.stopPropagation(),t.handleLogin({email:a,password:l})},children:[Object(n.jsx)(f,{title:"Bienvenida a nuestra tienda de camisetas"}),Object(n.jsx)(f,{title:"Identif\xedcate por favor"}),Object(n.jsx)("label",{className:"form__label display-block",htmlFor:"email",children:"Escribe tu email:"}),Object(n.jsx)("input",{className:"form__input-text m-0",type:"text",id:"email",value:a,onChange:function(t){i(t.target.value)}}),Object(n.jsx)("label",{className:"form__label display-block",htmlFor:"password",children:"Escribe tu contrase\xf1a:"}),Object(n.jsx)("input",{className:"form__input-text m-0",type:"password",id:"password",value:l,onChange:function(t){u(t.target.value)}}),Object(n.jsx)("button",{className:"card__btn m-0 mt-1",children:"Entrar"}),t.loginError]})},x=function(t){return Object(n.jsx)("div",{children:Object(n.jsx)("button",{className:"card__btn m-0 mb-1",onClick:function(e){t.handleCloseSession()},children:"Cerrar sesi\xf3n"})})},p=function(t){return Object(n.jsxs)("article",{className:"card",children:[Object(n.jsx)("img",{src:t.imageUrl,className:"card__img",alt:"Producto: ".concat(t.name)}),Object(n.jsx)("h3",{className:"card__title",children:t.name}),Object(n.jsxs)("p",{className:"card__description",children:[t.price," \u20ac"]}),Object(n.jsx)("button",{className:"card__btn",title:"A\xf1adir este producto a la cesta",onClick:function(){t.incrementCartProduct(t.id)},children:"A\xf1adir a la cesta"}),Object(n.jsx)(s.b,{to:"/product/".concat(t.id),className:"card__btn",title:"Ver el detalle de este producto",children:"Ver detalle del producto"})]})},g=function(t){return Object(n.jsxs)("form",{className:"mb-1",onSubmit:function(t){t.preventDefault()},children:[Object(n.jsx)("label",{className:"form__label",htmlFor:"name",children:"Filtrar por nombre:"}),Object(n.jsx)("input",{className:"form__input-text",type:"text",id:"name",value:t.filterText,onChange:function(e){t.handleFilter(e.target.value)}})]})},C=function(t){var e=t.shopProducts.map((function(e){return Object(n.jsx)(p,{id:e.id,imageUrl:e.imageUrl,name:e.name,price:e.price,incrementCartProduct:t.incrementCartProduct},e.id)}));return Object(n.jsxs)("div",{children:[Object(n.jsx)(f,{title:"Listado de camisetas"}),Object(n.jsx)(g,{filterText:t.filterText,handleFilter:t.handleFilter}),Object(n.jsx)("section",{className:"cards",children:e})]})},P=function(t){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(f,{title:"Detalle del producto: ".concat(t.name)}),Object(n.jsxs)("article",{className:"card",children:[Object(n.jsx)("img",{src:t.imageUrl,className:"card__img",alt:"Producto: ".concat(t.name)}),Object(n.jsx)("h3",{className:"card__title",children:t.name}),Object(n.jsxs)("p",{className:"card__description",children:["Precio: ",Object(n.jsxs)("span",{className:"text--bold",children:[t.price," \u20ac"]})]}),Object(n.jsxs)("p",{className:"card__description",children:["Descripci\xf3n: ",Object(n.jsx)("span",{className:"text--bold",children:t.description})]}),Object(n.jsxs)("p",{className:"card__description",children:["Tallas: ",Object(n.jsx)("span",{className:"text--bold",children:t.sizes.join(" - ")})]})]})]})},N="//localhost:3000/api",_={getProducts:function(){return fetch("".concat(N,"/products")).then((function(t){return t.json()})).then((function(t){return t.products.items}))},sendLogin:function(t){return fetch("".concat(N,"/login"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()}))},getCart:function(t){return fetch("".concat(N,"/cart?userId=").concat(t))},sendCart:function(t,e){var c=e.map((function(t){return{id:t.id,units:t.units}}));return fetch("".concat(N,"/cart?userId=").concat(t),{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}})}},v={decrementCartProduct:function(t,e){var c=t.find((function(t){return t.id===e}));if(c.units>1)c.units-=1;else{var n=t.findIndex((function(t){return t.id===e}));t.splice(n,1)}return t},deleteCartProduct:function(t,e){var c=t.findIndex((function(t){return t.id===e}));return t.splice(c,1),t},getProduct:function(t,e){return t.find((function(t){return t.id===e}))},incrementCartProduct:function(t,e,c){var n=e.find((function(t){return t.id===c}));if(n)n.units+=1;else{var r=t.find((function(t){return t.id===c}));r.units=1,e.push(r)}return e}},S={get:function(t){var e=JSON.parse(localStorage.getItem(t));return null!==e?e:{}},remove:function(t){localStorage.removeItem(t)},set:function(t,e){localStorage.setItem(t,JSON.stringify(e))}},y=function(){var t=S.get("user"),e=Object(r.useState)(t.userId||""),c=Object(d.a)(e,2),a=c[0],i=c[1],s=Object(r.useState)(""),u=Object(d.a)(s,2),j=u[0],b=u[1],m=Object(r.useState)([]),f=Object(d.a)(m,2),p=f[0],g=f[1],N=Object(r.useState)([]),y=Object(d.a)(N,2),I=y[0],k=y[1],T=Object(r.useState)(""),F=Object(d.a)(T,2),w=F[0],E=F[1];Object(r.useEffect)((function(){_.getProducts().then((function(t){g(t)}))}),[]),Object(r.useEffect)((function(){_.sendCart(a,I)}),[a,I]);var L=function(t){_.sendLogin(t).then((function(t){console.log(t),t.error?b(t.message):(b(""),i(t.userId),S.set("user",t))}))},U=function(t){E(t)},J=function(t){var e=v.incrementCartProduct(p,I,t);k(Object(o.a)(e))},z=function(t){var e=v.decrementCartProduct(I,t);k(Object(o.a)(e))},A=function(t){v.deleteCartProduct(I,t),k(Object(o.a)(I))},D=function(){return p.filter((function(t){return t.name.toLowerCase().includes(w.toLowerCase())}))},V=function(t){var e=v.getProduct(p,t.match.params.productId);return e?Object(n.jsx)(P,{name:e.name,price:e.price,description:e.description,imageUrl:e.imageUrl,sizes:e.sizes}):Object(n.jsx)("p",{children:"Producto no encontrado"})};return Object(n.jsx)(n.Fragment,{children:""===a?Object(n.jsx)(h,{loginError:j,handleLogin:L}):Object(n.jsxs)(l.c,{children:[Object(n.jsxs)(l.a,{exact:!0,path:"/",children:[Object(n.jsx)(x,{}),Object(n.jsxs)("div",{className:"col2",children:[Object(n.jsx)(C,{shopProducts:D(),filterText:w,handleFilter:U,incrementCartProduct:J}),Object(n.jsx)(O,{cartProducts:I,incrementCartProduct:J,decrementCartProduct:z,deleteCartProduct:A})]})]}),Object(n.jsx)(l.a,{path:"/product/:productId",component:V})]})})};c(33);i.a.render(Object(n.jsx)(s.a,{children:Object(n.jsx)(y,{})}),document.querySelector("#root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.6c0bafa3.chunk.js.map